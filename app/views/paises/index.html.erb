<meta name="viewport" content="width=device-width, initial-scale=1.0">
<div id="dgrid">
  <table id="grid"></table>
</div>

<div id='dficha'>
	<iframe id="ficha" class="ficha"> </iframe>
</div>

<style>
  #dgrid, #dficha {
    display: inline-block;
    vertical-align: top;
  }
  #dficha {
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
    0 3px 1px -2px rgba(0, 0, 0, 0.2),
    0 1px 5px 0 rgba(0, 0, 0, 0.12);
  }
</style>

<script>
  fon = function(id, v){
    if (v[0] == "A") return(" class='negrita'");
  }

	grid = '#grid';
	toolgrid = '#grid_toppager';

	var vgrid = $(grid).jqGrid({
		<%= render "shared/grid_def" %>

		height: 300,
		width: 500,
		rowNum:50,

		cellEdit: true,
		gridview: true,	// Acelera la velocidad de renderizado. Poner a false con trees y subgrids

    toppager: true,
		rowList:[10,20,30,50,100,500,1000],
		altRows: true,	// filas tipo cebra
		sortable: true,	// Si las columnas se pueden reordenar (cambiar de sitio)
		viewrecords: true,	// Muestra información del total de registros en la toolbar

		ondblClickRow: editInForm,

		//shrinkToFit: false,
		//multiSort: true,
		//multiselect: true,
		//rownumbers: true,
		scroll: true,
	});

	$(grid).jqGrid('gridResize', {minWidth: 500, minHeight: 80});
	$(grid).jqGrid('navGrid', toolgrid, {edit: false, add: false, del: true}, {}, {}, {}, {multipleSearch: true, multipleGroup: true, showQuery: true});
	$(grid).jqGrid('filterToolbar', {stringResult: true, searchOperators: true}); vgrid[0].toggleToolbar();
	$(grid).jqGrid('bindKeys');

	$(grid).jqGrid('navButtonAdd', toolgrid, {caption:"",title:"Barra de búsqueda", buttonicon :'ui-icon-pin-s', onClickButton:function(){vgrid[0].toggleToolbar()}});
	$(grid).jqGrid('navButtonAdd', toolgrid, {caption:"",title:"Formulario", buttonicon :'ui-icon-carat-2-n-s', onClickButton: editInForm});
	$(grid).jqGrid('navButtonAdd', toolgrid, {caption:"",title:"Nueva Alta", buttonicon :'ui-icon-plus', onClickButton: newFicha});

	<%= render "shared/grid_js" %>
</script>
