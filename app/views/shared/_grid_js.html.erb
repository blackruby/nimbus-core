function editInLine() {
  id = $(grid).jqGrid('getGridParam','selrow');
  if (id != null)
    $(grid).jqGrid('editRow', id, true);
  else
    alert("Seleccione un registro");
}

function editInForm() {
  id = $(grid).jqGrid('getGridParam','selrow');
  if (id != null) {
    $("#ficha").attr('src', '<%= @url_base %>' + id + '/edit' + '<%= @arg_edit %>');
    $("#dialog").dialog("open");
  } else
    alert("Seleccione un registro");
}

function newFicha() {
  $("#ficha").attr('src', '<%= @url_new %>');
  $("#dialog").dialog("open");
}

$("#ficha").load(function() {
  h = this.contentWindow._altura;
  if (h == undefined) h = this.contentWindow.document.body.offsetHeight + 100 + 'px';
  $(this).parent().css("height", h);
/*
  w = this.contentWindow._anchura;
  if (w == undefined) w = "400px"
  $(this).parent().css("width", w);
*/
});

function grid_reload() {
  $(grid).trigger('reloadGrid');
}

$("#ficha").attr('src', '<%= @url_base %>0/edit');
